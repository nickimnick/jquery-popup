	/*
	
	Minus Popup Plug-in Lite v5.3.2 www.minus99.com - 2012
	
	*/

(function(b){b.fn.extend({minusPopup:function(h){h=b.extend({width:0,widthStyle:"width",height:0,percent:1,spacer:0,timeout:0,openWith:"click",closeWith:".btnMinPpCl",closeText:"",customClass:"",master:"",header:"",footer:"",content:"",type:"content",href:"",target:"self",scrollSpeed:500,scrollable:!0,speed:0,opacity:.5,callBack:"",fire:""},h);return this.each(function(){var a=h,F=b(this);(function(){function h(){k=window.innerWidth;f=window.innerHeight;q=b(document).height();scrl=b(window).scrollTop(); G&&(scrl=b("html, body").scrollTop(),f=b(window).height(),k=b(window).width())}function x(){h();b(y).css({height:f,opacity:a.opacity}).fadeIn(a.speed,function(){b(d).css("visibility","visible")});0!=a.width&&b(g).css(a.widthStyle,a.width+"px");"image"!=a.type&&1!=a.percent?(e=f*a.percent,z=b(r).outerHeight(!1),A=b(t).outerHeight(!1),b(c).height(e-(z+A))):"image"==a.type?H(a.content):"iframe"==a.type?(e=a.height,b(c).css("height",a.height)):e=b(g).outerHeight(!1);"image"!=a.type&&B()}function B(){e> f&&scrl+a.spacer+e<q?b(d).css({top:scrl+a.spacer}):e<f?b(d).css({top:scrl+(f-e)/2}):(b(d).css({top:scrl+f-(e+a.spacer)}),window.scrollTo(0,scrl+f-(e+a.spacer)))}function u(){h();v=b(g).offset();e<f?b(d).stop().animate({top:scrl+(f-e)/2+"px"},a.scrollSpeed):e>f&&scrl+a.spacer+e<q&&(scrl>v.top+e||scrl<v.top)&&b(d).stop().animate({top:scrl+a.spacer+"px"},a.scrollSpeed)}function H(c){var d=new Image;d.onload=function(){l=this.height;C=this.width;m=C/l;if(1==a.percent)b(g).height(l),e=l;else{var c,d;f< k&&k/f>m?(c=f*a.percent,d=c*m):(d=k*a.percent,c=d/m);b("img.minPpImg",g).height(c).width(d);b(g).height(c).width(d);e=c}B();u()};d.src=c}function D(a){a&&b.globalEval(a)}function E(){n=!0;""!=a.closeText&&b("a.btnMinPpCl",g).html(a.closeText);""!=a.header&&b(r).html(a.header).show();""!=a.footer&&b(t).html(a.footer).show();switch(a.type){case "content":b(c).html(a.content);break;case "image":""!=a.href?b(c).html('<a target="_'+a.target+'" class="minPpImgLink" href="'+a.href+'"><img border="0" src="'+ a.content+'" /></a>'):b(c).html('<img class="minPpImg" border="0" src="'+a.content+'" />');break;case "iframe":b(c).html('<iframe class="minPpIframe" frameborder="0" name="minPpIframe" style="margin:0; padding:0; width:100%; height:100%;" src="'+a.content+'"></iframe>');break;case "object":b(c).html(b(a.content).html())}""!=a.customClass&&b(g).addClass(a.customClass);x();""!=a.callBack&&D(a.callBack);0<a.timeout&&setTimeout(function(){p()},a.timeout);".btnMinPpCl"!=a.closeWith&&I()}function p(){n= !1;b(d).css("visibility","hidden");b(y).fadeOut(a.speed);b(g).removeAttr("style");0<b("iframe",c).length&&b("iframe",c).removeAttr("src");b(c).html("").removeAttr("style");b(t).html("").hide();b(r).html("").hide();""!=a.customClass&&b(g).removeClass(a.customClass);""!=a.fire&&D(a.fire)}function I(){b(a.closeWith).click(function(){p()})}null==b("#minHider"+a.master).html()&&b("body").append('<div id="minHider'+a.master+'" style="display:none; width:100%;"></div><div class="minPpWrp'+a.master+'" style="visibility:hidden; overflow:hidden;"><div class="minPp'+ a.master+'"><a href="javascript:void(0);" class="btnMinPpCl"></a><div class="minPphdr'+a.master+'" style="display:none;"></div><div class="minPpBdy'+a.master+'"></div><div class="minPpFtr'+a.master+'" style="display:none;"></div></div></div>');var f,k,q,v,z,A,G=navigator.userAgent.match(/MSIE\s(?!9.0)/),y=b("#minHider"+a.master),d=b(".minPpWrp"+a.master),g=b(".minPp"+a.master),r=b(".minPphdr"+a.master),c=b(".minPpBdy"+a.master),t=b(".minPpFtr"+a.master),w=!0,n=!1,l=0,C=0,e,m;b(window).resize(function(){w&& n&&(w=!1,setTimeout(function(){w=!0;b(d).css({top:0});x();u()},100))});b(window).scroll(function(){n&&a.scrollable&&u()});"click"==a.openWith?b(F).click(E):"auto"==a.openWith&&E();b(".btnMinPpCl",g).click(function(){p()});b(document).keyup(function(a){27==a.keyCode&&p()})})()})}})})(jQuery);