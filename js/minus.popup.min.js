	/*
	
	Minus Popup Plug-in Lite v5.3.1 www.minus99.com - 2012
	
	*/

(function(b){b.fn.extend({minusPopup:function(h){h=b.extend({width:0,widthStyle:"width",height:0,percent:1,spacer:0,timeout:0,openWith:"click",closeWith:".btnMinPpCl",closeText:"",customClass:"",master:"",header:"",footer:"",content:"",type:"content",href:"",target:"self",scrollSpeed:500,scrollable:!0,speed:0,opacity:0.5,callBack:"",fire:""},h);return this.each(function(){var a=h,E=b(this);(function(){function h(){k=window.innerWidth;f=window.innerHeight;q=b(document).height();scrl=b(window).scrollTop(); F&&(scrl=b("html, body").scrollTop(),f=b(window).height(),k=b(window).width())}function w(){h();b(x).css({height:f,opacity:a.opacity}).fadeIn(a.speed,function(){b(e).css("visibility","visible")});0!=a.width&&b(g).css(a.widthStyle,a.width+"px");"image"!=a.type&&1!=a.percent?(d=f*a.percent,y=b(r).outerHeight(!1),z=b(s).outerHeight(!1),b(c).height(d-(y+z))):"image"==a.type?G(a.content):"iframe"==a.type?(d=a.height,b(c).css("height",a.height)):d=b(g).outerHeight(!1);"image"!=a.type&&A()}function A(){d> f&&scrl+a.spacer+d<q?b(e).css({top:scrl+a.spacer}):d<f?b(e).css({top:scrl+(f-d)/2}):(b(e).css({top:scrl+f-(d+a.spacer)}),window.scrollTo(0,scrl+f-(d+a.spacer)))}function t(){h();u=b(g).offset();d<f?b(e).stop().animate({top:scrl+(f-d)/2+"px"},a.scrollSpeed):d>f&&scrl+a.spacer+d<q&&(scrl>u.top+d||scrl<u.top)&&b(e).stop().animate({top:scrl+a.spacer+"px"},a.scrollSpeed)}function G(e){var c=new Image;c.onload=function(){l=this.height;B=this.width;m=B/l;if(1==a.percent)b(g).height(l),d=l;else{var c,e;f< k&&k/f>m?(c=f*a.percent,e=c*m):(e=k*a.percent,c=e/m);b("img.minPpImg",g).height(c).width(e);b(g).height(c).width(e);d=c}A();t()};c.src=e}function C(a){a&&b.globalEval(a)}function D(){n=!0;""!=a.closeText&&b("a.btnMinPpCl",g).html(a.closeText);""!=a.header&&b(r).html(a.header).show();""!=a.footer&&b(s).html(a.footer).show();switch(a.type){case "content":b(c).html(a.content);break;case "image":""!=a.href?b(c).html('<a target="_'+a.target+'" class="minPpImgLink" href="'+a.href+'"><img border="0" src="'+ a.content+'" /></a>'):b(c).html('<img class="minPpImg" border="0" src="'+a.content+'" />');break;case "iframe":b(c).html('<iframe class="minPpIframe" frameborder="0" name="minPpIframe" style="margin:0; padding:0; width:100%; height:100%;" src="'+a.content+'"></iframe>');break;case "object":b(c).html(b(a.content).html())}""!=a.customClass&&b(g).addClass(a.customClass);w();""!=a.callBack&&C(a.callBack);0<a.timeout&&setTimeout(function(){p()},a.timeout);".btnMinPpCl"!=a.closeWith&&H()}function p(){n= !1;b(e).css("visibility","hidden");b(x).fadeOut(a.speed);b(g).removeAttr("style");b(c).html("").removeAttr("style");b(s).html("").hide();b(r).html("").hide();""!=a.customClass&&b(g).removeClass(a.customClass);""!=a.fire&&C(a.fire)}function H(){b(a.closeWith).click(function(){p()})}null==b("#minHider"+a.master).html()&&b("body").append('<div id="minHider'+a.master+'" style="display:none; width:100%;"></div><div class="minPpWrp'+a.master+'" style="visibility:hidden; overflow:hidden;"><div class="minPp'+ a.master+'"><a href="javascript:void(0);" class="btnMinPpCl"></a><div class="minPphdr'+a.master+'" style="display:none;"></div><div class="minPpBdy'+a.master+'"></div><div class="minPpFtr'+a.master+'" style="display:none;"></div></div></div>');var f,k,q,u,y,z,F=navigator.userAgent.match(/MSIE\s(?!9.0)/),x=b("#minHider"+a.master),e=b(".minPpWrp"+a.master),g=b(".minPp"+a.master),r=b(".minPphdr"+a.master),c=b(".minPpBdy"+a.master),s=b(".minPpFtr"+a.master),v=!0,n=!1,l=0,B=0,d,m;b(window).resize(function(){v&& n&&(v=!1,setTimeout(function(){v=!0;b(e).css({top:0});w();t()},100))});b(window).scroll(function(){n&&a.scrollable&&t()});"click"==a.openWith?b(E).click(D):"auto"==a.openWith&&D();b(".btnMinPpCl",g).click(function(){p()});b(document).keyup(function(a){27==a.keyCode&&p()})})()})}})})(jQuery);